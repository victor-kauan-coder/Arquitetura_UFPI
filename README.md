# Image Histogram Equalization in Python and RISC-V Assembly

This project was developed for the Computer Architecture course at the Federal University of Piau√≠ (UFPI). It demonstrates and compares the implementation of an RGB image histogram equalization algorithm using a high-level language (Python) and a low-level language (RISC-V Assembly).

## üöÄ Project Overview

The primary goal of this project is to implement the histogram equalization algorithm in two distinct environments to understand the differences in complexity, performance, and control.

* **Python Implementation:** A high-level approach using libraries like Pillow (PIL), NumPy, and Plotly for straightforward image manipulation, numerical computation, and data visualization.
* **RISC-V Assembly Implementation:** A low-level implementation written for the RARS (RISC-V Assembler and Runtime Simulator). This version directly manipulates pixel data at the byte level to perform the equalization, providing a deeper understanding of the underlying hardware operations.

The project validates the correctness of the Assembly code by comparing its output with the results from the Python implementation.

## üìÇ Project Structure

The repository is organized into the following key files and directories:

* `imagens/`: Contains the input images and the resulting equalized images.
* `bins/`: Stores the binary files representing the red, green, and blue channels extracted from the input image. These are used as input for the Assembly program.
* `result_python/`: Contains `.txt` files of the histograms generated by the Python scripts.
* `result_rars/`: Contains `.txt` files of the histograms generated by the RARS Assembly code.
* **`equalizador.asm`**: The main RISC-V Assembly code for performing histogram equalization on the image channels.
* **`macro.asm`**: A collection of macros used by `equalizador.asm` to handle file I/O and other repetitive tasks.
* **`bin_all.py`**: A Python script to preprocess an image, separating its R, G, and B channels into individual binary files.
* **`equalizacao.py`**: The high-level Python implementation of the histogram equalization algorithm, used as a reference for correctness.
* **`bin_to_jpg.py`**: A Python script to reconstruct the final equalized image from the separate binary channel files processed by the Assembly code.
* **`histograma_rgb.py`**: A utility script to generate and display an RGB histogram from an image file.

## üõ†Ô∏è How to Run

### Prerequisites

* Python 3.x
* The following Python libraries: `Pillow`, `Plotly`, `Pandas`, `NumPy`
    ```bash
    pip install pillow plotly pandas numpy
    ```
* [RARS (RISC-V Assembler and Runtime Simulator)](https://github.com/TheThirdOne/rars/releases)

### Step-by-Step Workflow

1.  **Prepare Image and Generate Binary Channels:**
    * Place your input image (e.g., `1.jpg`) inside the `imagens/` directory.
    * Run the `bin_all.py` script to generate the binary files for the R, G, and B channels. This script reads the input image and creates `red_channel.bin`, `green_channel.bin`, and `blue_channel.bin` inside the `bins/` folder.
        ```bash
        python bin_all.py
        ```

2.  **Run the RISC-V Assembly Implementation:**
    * Launch the RARS simulator.
    * Open the `equalizador.asm` file.
    * Assemble and run the code.
    * The Assembly program will read the `.bin` files from the `bins/` directory, perform histogram equalization on each channel, and generate the processed binary files (e.g., `pixel_bytes_red.bin`) in the same directory. It will also produce text files with the resulting histograms in the `result_rars/` folder.

3.  **Generate the Equalized Image from Assembly Output:**
    * Run the `bin_to_jpg.py` script. This will take the processed binary files from the previous step and reconstruct the final equalized image.
        ```bash
        python bin_to_jpg.py
        ```
    * This saves the result as `imagem_equalizada_assembly.jpg` in the `imagens/` folder and displays its RGB histogram for visual analysis.

4.  **Run the Python Implementation (for Comparison):**
    * Execute the `equalizacao.py` script to perform the same operation using the high-level Python implementation.
        ```bash
        python equalizacao.py
        ```
    * This saves the result as `imagem_equalizada_altonivel.jpg` and generates corresponding histogram text files in the `result_python/` folder, allowing for a direct comparison with the Assembly output.

## üìä Results and Verification

This project facilitates a direct comparison between the outputs of the high-level and low-level implementations. By comparing the resulting images and the histogram data generated by both the Python script (`result_python/`) and the Assembly code (`result_rars/`), one can verify that the low-level implementation in `equalizador.asm` correctly and accurately performs the histogram equalization algorithm.

## üë• Contributors

**Victor Kauan**

[![GitHub](https://img.shields.io/badge/GitHub-@victor--kauan--coder-181717?logo=github&style=for-the-badge)](https://github.com/victor-kauan-coder)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-Victor%20Miranda-0A66C2?logo=linkedin&style=for-the-badge)](https://www.linkedin.com/in/victor-miranda-5342a6337)

**Davi Soares**

[![GitHub](https://img.shields.io/badge/GitHub-@SoaresDavidson-181717?logo=github&style=for-the-badge)](https://github.com/SoaresDavidson)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-Davi%20Soares-0A66C2?logo=linkedin&style=for-the-badge)](https://www.linkedin.com/in/davi-soares-745776129)
